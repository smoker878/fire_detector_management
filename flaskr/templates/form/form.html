{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}{{ f['work_name'] }} &emsp;å·¥å–®ï¼š{{f['work_id']}}{% endblock %} &emsp;ç‹€æ…‹ï¼š{{ state }}</h1>
{% endblock %}


{% block content %}
  <div>
  {% if g.user['user_id'] == f['applier_id'] and not f['excutor_id'] %}<!-- æœªåŸ·è¡ŒBypassçš„è¡¨å–®æ‰èƒ½åˆªé™¤ -->
  <a class="action" href="{{ url_for('form.delete', requistion_id = f['requistion_id']) }}">ğŸ—‘ï¸æŠ½å›</a>
  {% endif %}
  {% if  not f['excutor_id'] %}
  <a class="action" href="{{ url_for('form.excute', requistion_id = f['requistion_id']) }}">ğŸš¨åŸ·è¡ŒBypass</a>
  {% endif %}
  {% if f['excutor_id'] and not f['reset_person_id'] %} <!-- åŸ·è¡ŒéBypassï¼Œæ‰èƒ½å¾©åŸ -->
  <a class="action" href="{{ url_for('form.reset', requistion_id = f['requistion_id']) }}"> â˜˜ï¸å¾©åŸ(è§£é™¤Bypass)</a>
  {% endif %}
  </div>
  <div><a class="action" href="{{ url_for('form.form_docx', requistion_id = f['requistion_id']) }}">ğŸ“„ä¸‹è¼‰Wordæ–‡ä»¶</a></div>
  <div class="about">Bypasså–®è™Ÿï¼š{{f['requistion_id']}}</div>
  <h2>ç”³è«‹</h2>
  <div class="about">ç”³è«‹äººï¼š{{ f['applier'] }} &emsp;éƒ¨é–€ï¼š {{ f['apply_department'] }} &emsp;ç”³è«‹æ™‚é–“ï¼š {{ form_time['apply_date'] }}</div>
  <h2>å·¥ä½œå…§å®¹</h2>
  <div class="about">å·¥ä½œå…§å®¹ï¼š{{ f['work_name'] }}</div>
  <div class="about">å·¥å–®ï¼š{{f['work_id']}}</div>
  <div class="about">æ‰¿æ”¬å•†ï¼š{{ f['contractor'] }} </div>
  <div class="about"> é è¨ˆå·¥ä½œæ—¥ï¼š{{ f['predict_to_work_date'].strftime('%Y-%m-%d') }}</div>
  <div class="about">å…¶ä»–è¨Šæ¯ï¼š{{f['other_message']}}</div>

  <h2>bypassçš„åµæ¸¬å™¨</h2>
  {% for divice in Bypass_device %}
    <div>{{ divice[0] }}</div>
  {% endfor %}

  {% if f['excutor_id']  %}
    <h2>bypassåŸ·è¡Œ</h2>
    <div class="about">åŸ·è¡Œäººï¼š{{ f['excutor'] }} &emsp;éƒ¨é–€ï¼š {{ f['excute_department'] }}&emsp; æ—¥æœŸï¼š{{ form_time["excute_date"] }} </div>
  {% endif %}
  {% if f['reset_person_id'] %}
    <h2>bypasså¾©åŸ</h2>
    <div class="about">å¾©åŸäººï¼š{{ f['reset_person'] }} &emsp;éƒ¨é–€ï¼š {{ f['reset_department'] }} &emsp;æ—¥æœŸï¼š{{ form_time['reset_date'] }} </div>
    <div class="red-box">
    <h2>éœ€è§£é™¤bypassçš„è¨­å‚™</h2>
    {% if need_reset  %}
      {% for device in need_reset %}
        <div class="about">{{device[0]}}</div>
      {% endfor %}
    {% else %}
        <div class="about">ç„¡é ˆè§£é™¤</div>
    {% endif %}
    </div>
  {% endif %}
{% endblock %}